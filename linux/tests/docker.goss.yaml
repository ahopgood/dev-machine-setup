package:
    containerd.io:
        installed: true
        versions:
            - 1.7.27-1
    docker-buildx-plugin:
        installed: true
        versions:
            - 0.26.1-1~ubuntu.24.04~noble
    docker-ce:
        installed: true
        versions:
            - 5:28.3.3-1~ubuntu.24.04~noble
    docker-ce-cli:
        installed: true
        versions:
            - 5:28.3.3-1~ubuntu.24.04~noble
    docker-compose-plugin:
        installed: true
        versions:
            - 2.39.1-1~ubuntu.24.04~noble

group:
    docker:
        exists: true
        gid: 984
command:
    ls -l /etc/apt/keyrings | grep docker.asc:
        title: Check repository keyring is present
        exit-status: 0
        stdout:
            and:
                - contain-substring: docker.asc
        stderr: null
        timeout: 0
    ls -l /etc/apt/sources.list.d/ | grep docker:
        title: Check apt repository is present
        exit-status: 0
        stdout:
            and:
              - contain-substring: docker.list
        stderr: ""
        timeout: 10000
    groups alexander | grep docker:
        title: Check user is part of the docker group to allow non-sudo access to docker-cli
        exit-status: 0
        stdout:
            - 'alexander : alexander adm cdrom sudo dip plugdev users lpadmin docker i2c'
        stderr: ""
        timeout: 10000
